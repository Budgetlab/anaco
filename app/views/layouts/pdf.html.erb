<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Acte HT2 PDF</title>

  <!-- Styles intégrés pour PDF -->
  <%= wicked_pdf_stylesheet_link_tag 'application' %>
  <%= wicked_pdf_stylesheet_link_tag 'utility' %>
  <%= wicked_pdf_stylesheet_link_tag 'actiontext' %>

  <!-- Inclusion du CSS spécifique pour PDF -->
  <%= wicked_pdf_stylesheet_link_tag 'pdf' %>

  <!-- JavaScript pour Highcharts -->
  <%= wicked_pdf_javascript_include_tag 'application' %>
  <%#= wicked_pdf_javascript_include_tag "https://code.highcharts.com/highcharts.js" %>
  <%#= wicked_pdf_javascript_include_tag "https://code.highcharts.com/modules/exporting.js" %>

  <!-- Inclusion des fichiers JavaScript du dossier custom -->
  <%= wicked_pdf_javascript_include_tag 'custom/dsfr.module.min', module: true %>
  <%= wicked_pdf_javascript_include_tag 'custom/dsfr.nomodule.min', nomodule: true %>

  <script>
    // Ensure all resources are loaded before setting ready status
    function setReadyStatus() {
      // Set a timeout to ensure all JavaScript has executed
      setTimeout(function() {
        window.status = 'ready';
        console.log('PDF ready for rendering');
      }, 1000);
    }

    // Use both load events for better compatibility
    if (window.addEventListener) {
      window.addEventListener('load', setReadyStatus, false);
    } else if (window.attachEvent) {
      window.attachEvent('onload', setReadyStatus);
    } else {
      window.onload = setReadyStatus;
    }
  </script>

  <!-- Les styles sont maintenant dans le fichier pdf.scss -->
</head>
<body>
<%= yield %>
</body>
</html>
