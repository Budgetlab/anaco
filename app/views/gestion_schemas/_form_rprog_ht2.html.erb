<% steps_max = @programme == "HT2" ? 2 : 4 %>
<div class="fr-stepper">
  <h2 class="fr-stepper__title">
    <span class="fr-stepper__state">Étape 2 sur <%= steps_max %></span>
    Vision RPROG Crédits HT2 - AE/CP
  </h2>
  <div class="fr-stepper__steps" data-fr-current-step="2" data-fr-steps="<%= steps_max %>"></div>
  <% if steps_max == 4 %>
    <p class="fr-stepper__details">
      <span class="fr-text--bold">Étape suivante :</span> Vision RPROG Crédits T2
    </p>
  <% end %>
</div>

<div class="fr-alert fr-alert--info fr-mb-2w">
  <p>Les données sont remplies par défaut avec celles de la vision RPROG. Vous pouvez mettre à jour ces données et les comparer avec celles du RPROG.</p>
</div>

<div class="fr-grid-row fr-grid-row--gutters fr-mb-4w">
  <div class="fr-col-6 fr-col-lg-6">

    <div class="fr-h3"><p class="fr-badge fr-badge--orange-terre-battue">Vision CBCM</p> Crédits HT2 - AE/CP</div>

    <%= render 'form' %>
  </div>
  <div class="fr-col-6 fr-col-lg-6">
    <div class="fr-card--shadow fr-px-2w">
      <div class="fr-h3"><p class="fr-badge fr-badge--beige-gris-galet">Vision RPROG</p></div>
      <div class="fr-h5">Situation à date du CRG2</div>
      <div class="fr-h6 fr-mb-1w">Solde prévisionnel</div>
      <div class="fr-grid-row fr-grid-row--gutters fr-mb-2w">
        <div class="fr-col-6 fr-col-lg-6">
          <div class="fr-label">AE</div>
          <div class="fr-text--bold fr-my-3v"><%= format_number(@gestion_schema.prevision_solde_budgetaire_ae) %> €</div>
        </div>
        <div class="fr-col-6 fr-col-lg-6">
          <div class="fr-label">CP</div>
          <div class="fr-text--bold fr-my-3v"><%= format_number(@gestion_schema.prevision_solde_budgetaire_cp) %> €</div>
        </div>
      </div>
      <div class="fr-h6 fr-mb-1w">Niveau de la mise en réserve</div>
      <div class="fr-grid-row fr-grid-row--gutters fr-mb-2w">
        <div class="fr-col-6 fr-col-lg-6">
          <div class="fr-label">AE</div>
          <div class="fr-text--bold fr-my-3v"><%= format_number(@gestion_schema.mer_ae) %> €</div>
        </div>
        <div class="fr-col-6 fr-col-lg-6">
          <div class="fr-label">CP</div>
          <div class="fr-text--bold fr-my-3v"><%= format_number(@gestion_schema.mer_cp) %> €</div>
        </div>
      </div>
      <div class="fr-h5">Hypothèses de couverture</div>
      <div class="fr-h6 fr-mb-1w">Mobilisation de la mise en réserve</div>
      <div class="fr-grid-row fr-grid-row--gutters fr-mb-2w">
        <div class="fr-col-6 fr-col-lg-6">
          <div class="fr-label">AE</div>
          <div class="fr-text--bold fr-my-3v"><%= format_number(@gestion_schema.mobilisation_mer_ae) %> €</div>
        </div>
        <div class="fr-col-6 fr-col-lg-6">
          <div class="fr-label">CP</div>
          <div class="fr-text--bold fr-my-3v"><%= format_number(@gestion_schema.mobilisation_mer_cp) %> €</div>
        </div>
      </div>

      <div class="fr-h6 fr-mb-1w">Fongibilité asymétrique</div>
      <div class="fr-grid-row fr-grid-row--gutters fr-mb-2w">
        <div class="fr-col-6 fr-col-lg-6">
          <div class="fr-label">AE</div>
          <div class="fr-text--bold fr-my-3v"><%= format_number(@gestion_schema.fongibilite_ae) %> €</div>
        </div>
        <div class="fr-col-6 fr-col-lg-6">
          <div class="fr-label">CP</div>
          <div class="fr-text--bold fr-my-3v"><%= format_number(@gestion_schema.fongibilite_cp) %> €</div>
        </div>
      </div>

      <div class="fr-h6 fr-mb-1w">Décret d'avance</div>
      <div class="fr-grid-row fr-grid-row--gutters fr-mb-2w">
        <div class="fr-col-6 fr-col-lg-6">
          <div class="fr-label">AE</div>
          <div class="fr-text--bold fr-my-3v"><%= format_number(@gestion_schema.decret_ae) %> €</div>
        </div>
        <div class="fr-col-6 fr-col-lg-6">
          <div class="fr-label">CP</div>
          <div class="fr-text--bold fr-my-3v"><%= format_number(@gestion_schema.decret_cp) %> €</div>
        </div>
      </div>

      <div class="fr-h6 fr-mb-1w">Crédits ouverts en LFG</div>
      <div class="fr-grid-row fr-grid-row--gutters fr-mb-2w">
        <div class="fr-col-6 fr-col-lg-6">
          <div class="fr-label">AE</div>
          <div class="fr-text--bold fr-my-3v"><%= format_number(@gestion_schema.credits_ouverts_ae) %> €</div>
        </div>
        <div class="fr-col-6 fr-col-lg-6">
          <div class="fr-label">CP</div>
          <div class="fr-text--bold fr-my-3v"><%= format_number(@gestion_schema.credits_ouverts_cp) %> €</div>
        </div>
      </div>

      <div class="fr-h5">Solde résultant des hypothèses de couverture</div>
      <div class="fr-grid-row fr-grid-row--gutters">
        <div class="fr-col-6">
          <div class="fr-card fr-card--blue fr-p-2w fr-card--no-border">
            <div class="fr-cart__body">
              <p class="fr-text--lg fr-mb-0 text_center">AE</p>
              <p class="fr-text--lg fr-text--bold fr-mb-0 text_center">-</p>
            </div>
          </div>
        </div>
        <div class="fr-col-6">
          <div class="fr-card fr-card--blue fr-p-2w fr-card--no-border">
            <div class="fr-cart__body">
              <p class="fr-text--lg fr-mb-0 text_center">CP</p>
              <p class="fr-text--lg fr-text--bold fr-mb-0 text_center">-</p>
            </div>
          </div>
        </div>
      </div>

      <hr class="fr-hr fr-mt-3w">
      <div class="fr-h5">Autres informations relatives à la fin de gestion</div>

      <div class="fr-h6 fr-mb-1w">Charge à payer</div>
      <div class="fr-grid-row fr-grid-row--gutters fr-mb-2w">
        <div class="fr-col-6 fr-col-lg-6">
          <div class="fr-label">AE</div>
          <div class="fr-text--bold fr-my-3v"><%= format_number(@gestion_schema.charges_a_payer_ae) %> €</div>
        </div>
        <div class="fr-col-6 fr-col-lg-6">
          <div class="fr-label">CP</div>
          <div class="fr-text--bold fr-my-3v"><%= format_number(@gestion_schema.charges_a_payer_cp) %> €</div>
        </div>
      </div>

      <div class="fr-h6 fr-mb-1w">Autres reports de charge</div>
      <div class="fr-grid-row fr-grid-row--gutters fr-mb-2w">
        <div class="fr-col-6 fr-col-lg-6">
          <div class="fr-label">AE</div>
          <div class="fr-text--bold fr-my-3v"><%= format_number(@gestion_schema.reports_autre_ae) %> €</div>
        </div>
        <div class="fr-col-6 fr-col-lg-6">
          <div class="fr-label">CP</div>
          <div class="fr-text--bold fr-my-3v"><%= format_number(@gestion_schema.reports_autre_ae) %> €</div>
        </div>
      </div>

      <div class="fr-h6 fr-mb-1w">Crédits à reporter</div>
      <div class="fr-grid-row fr-grid-row--gutters fr-mb-2w">
        <div class="fr-col-6 fr-col-lg-6">
          <div class="fr-label">AE</div>
          <div class="fr-text--bold fr-my-3v"><%= format_number(@gestion_schema.credits_reports_ae) %> €</div>
        </div>
        <div class="fr-col-6 fr-col-lg-6">
          <div class="fr-label">CP</div>
          <div class="fr-text--bold fr-my-3v"><%= format_number(@gestion_schema.credits_reports_ae) %> €</div>
        </div>
      </div>

      <div class="fr-grid-row fr-grid-row--gutters fr-mb-2w">
        <div class="fr-col-12 fr-col-lg-12">
          <div class="fr-label">Commentaire</div>
          <div class="fr-text--bold fr-my-1w"><%= @gestion_schema.commentaire%> </div>
        </div>
      </div>

    </div>
  </div>
</div>

